---
import { Github, Linkedin, Rss, Package } from '@lucide/astro';
import aboutData from "../data/about.json";

type Platform = {
  id: string;
  title: string;
  description: string;
  icon: string;
  image: string | null;
  borderColor: string;
};

type SocialLink = {
  type: string;
  label: string;
  url: string;
  color: string;
};

const data = aboutData as {
  title: string;
  introduction: string;
  education: {
    degree: string;
    institution: string;
    status: string;
  };
  achievements: string[];
  overview: string;
  platforms: Platform[];
  socialLinks: SocialLink[];
};

// Icon component mapping
const iconMap: Record<string, any> = {
  github: Github,
  linkedin: Linkedin,
  medium: Rss,
  huggingface: Package,
};
---

<section
  id="about"
  class="carousel-item relative w-screen h-screen overflow-hidden"
>
  <!-- Background Image -->
  <div
    class="absolute inset-0 bg-fixed bg-center bg-cover bg-no-repeat"
    style="background-image: url('/designing.jpg');"
    aria-hidden="true"
  ></div>
  
  <!-- Dark overlay -->
  <div
    class="absolute inset-0 bg-black/40 backdrop-blur-sm"
    aria-hidden="true"
  ></div>

  <!-- Scrollable content container -->
  <div class="relative z-10 w-full h-full overflow-y-auto scroll-smooth">
    <div class="px-6 py-12 max-w-7xl mx-auto">
      
      <!-- Header -->
      <h1 class="text-white text-4xl sm:text-5xl lg:text-6xl font-extrabold tracking-tight text-center mb-3 pt-6">
        {data.title}
      </h1>
      
      <!-- Introduction Paragraph -->
      <div class="max-w-4xl mx-auto text-center mb-12">
        <p class="text-base sm:text-lg text-white/90 leading-relaxed font-light">
          {data.introduction}
        </p>
      </div>

      <!-- Divider Line -->
      <div class="w-full h-px bg-white/30 mb-12"></div>

      <!-- Education & Achievement -->
      <div class="max-w-4xl mx-auto text-center mb-12">
        <p class="text-base sm:text-lg text-white/90 mb-4">
          {data.education.status} <span class="font-bold">{data.education.degree}</span> from <span class="font-bold">{data.education.institution}</span>
        </p>
        <p class="text-base sm:text-lg text-cyan-300 font-semibold">
          {data.achievements.join(' | ')}
        </p>
      </div>

      <!-- Divider Line -->
      <div class="w-full h-px bg-white/30 mb-12"></div>

      <!-- Overview Text -->
      <div class="max-w-4xl mx-auto text-center mb-8">
        <p class="text-base sm:text-lg text-white/90">
          {data.overview}
        </p>
      </div>

      <!-- Platforms Section -->
      <h2 class="text-white text-3xl sm:text-4xl lg:text-5xl font-extrabold text-center mb-4">
        Platforms
      </h2>
      
      <p class="text-center text-base sm:text-lg text-white/90 mb-10 max-w-4xl mx-auto">
        Below is a list of platforms that I have built and/or worked with since the start of my Bachelor's program along with descriptions and links.
      </p>

      <!-- Platform Cards Grid -->
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto mb-12">
        {data.platforms.map(platform => (
          <div class={`bg-black/40 backdrop-blur-md rounded-lg p-6 border border-white/20 hover:border-${platform.borderColor}/50 transition-all hover:transform hover:scale-105`}>
            <div class="flex items-center justify-center mb-4">
              {platform.image ? (
                <img src={platform.image} alt={platform.title} class="w-full h-32 object-cover rounded-lg" />
              ) : (
                <div class={`w-full h-32 bg-linear-to-br from-${platform.borderColor}/20 to-primary/20 rounded-lg flex items-center justify-center`}>
                  <span class="text-5xl">{platform.icon}</span>
                </div>
              )}
            </div>
            <h3 class="text-xl font-bold text-white text-center mb-2">{platform.title}</h3>
            <p class="text-sm text-white/80 text-center">
              {platform.description}
            </p>
          </div>
        ))}
      </div>

      <!-- Social Links Section -->
      <div class="pt-8 border-t border-white/30 max-w-4xl mx-auto">
        <h3 class="text-xl font-bold text-info mb-4 flex items-center gap-2 justify-center">
          <span>üåê</span> Connect With Me
        </h3>
        <div class="flex flex-wrap gap-4 justify-center">
          {data.socialLinks.map(link => {
            const Icon = iconMap[link.type];
            return (
              <a
                href={link.url}
                target="_blank"
                rel="noopener noreferrer"
                class={`btn btn-outline btn-${link.color} gap-2`}
              >
                {Icon && <Icon size={20} />}
                {link.label}
              </a>
            );
          })}
        </div>
      </div>

    </div>
  </div>
</section>